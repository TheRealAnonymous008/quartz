* *Motivated by the limitations of [[Inventory Management and Control]]*. In particular, using inventory as an indicator for when to reorder is more suited for final products than components since *we can control the demand for components
	* **Dependent demand** is demand originating within the system. **Independent demand** is demand originating outside the system.
* *Dependent demand is different from independent demand*. Production to meet dependent demand should be scheduled so as to explicitly recognize its linkage to production to meet independent demand. 
	* MRP is *push-based* because it computes schedules of what should be started given demand. 
	* MRP is used to coordinate orders from within the plant (**jobs**) and outside (**purchase orders**); to schedule them to satisfy material requirements generated by external demand. 
	* The main parameters are *quantity and timing*. 

* In this system we make use of **buckets**. Demand that accumulates over the interval of the  bucket is considered at the beginning of the bucket.
* **End items** refer to the finished product, while **Lower-level items** pertain to their constituent products. The relationship is described in the **Bill of Material (BOM)**.  As stipulated, *demand for end items generates demand for lower-level items*. 
	* Each item in the BOM is given a **low-level code** that indicates the lowest level in a BOM that a particular part is ever used. End items have an LLC of $0$.

## Inputs Outputs and Procedure
* A **master production schedule (MPS)** is the source of truth for demand. Gross Requirements indicate the expected demand of an end item per bucket as well as demand for lower-level parts. It gives quantity and due date. 
* The **Item Master File** is organized by part number and contains BOM information, lot-sizing information, and planning lead times. 
* The **Lot Sizing Rule (LSR)** determines how the jobs will be sized in order to balance competing desires of reducing inventory and increasing capacity [^MPS_2].
* The **Planning Lead Time (PLT)** determines job start times. 
* **On Hand Inventory Data** stores information describing parts, where they are located, and how many are currently on hand. This includes raw material stock, material kept within the plant, and assembly stock. It may also include allocation information
* **Scheduled Receipts (SR)** contain all previously released job orders  (i.e., sent to a vendor or released as a manufacturing job to the plant). Jobs that have not yet arrived at an inventory location are considered **Work In Progress**.
* **Coverage Analysis** studies how much demand is covered by current inventory, purchase orders, and manufacturing jobs.

* A **Planned Order Release** contains -- the part number, the number of units required, and the due date for the job. Each entry corresponds to possibly multiple requests from customers or assemblies.
* **Change notices** indicate modifications of existing jobs (i.e., priority or scheduling changes). Jobs can either be expedited or deferred.
* **Exception reports** notify the users if there are discrepancies between expected and actual outputs.

* We use the following notation
  
  $D_t$ - demand / gross requirements at time $t$
  $S_t$ - quantity currently scheduled to complete in period
  $I_t$ - projected on-hand inventory for end period $t$.. Current on-hand inventory is given by $I_0$
  $N_t$ - net requirements for period $t$. 


* For each part starting with end items[^MPS_1]
	* *Netting* - determine the net requirements (on-hand inventory minus scheduled receipts from the gross requirements). For level-zero items, we get this from the MPS. Lower-level items derive from previous operations.
	  
	  It also expedites scheduled receipts that are arriving too late and defers those arriving too soon.
	  
	  *Demand from Gross Requirements will be covered by inventory first, then by SRs, then by new PORs*. 
		* We compute
		  $$I_t=I_{t-1}-D_t$$
		  until it becomes $0$. In which case, an SR should arrive at this time $t'$
		  
		  A change notice should be made if the due date for existing SRs do not match the value of $t'$ 
		* At time $t'$ we then perform
		  
		  $$
		  I_{t'} \gets I_{t'} + S_{t'}
		  $$
		* We then repeat the process until we reach the time horizon or we run out of scheduled receipts.
		  
		  If we have excess SRs, we should issue a change notice to defer them to a very later date or remove them entirely.

		* The *net requirements can be computed* using the following procedure. Let $t^\ast$ be the first period with a negative projected on-hand inventory after SRs have been properly adjusted.
		  
		  We have 
		  
		  $$
		  N_t = \begin{cases}
		  0 & \text{if } t< t^\ast \\
		  -I_t & \text{if } t = t^\ast \\
		  D_t & \text{if } t>t^\ast 
		  \end{cases}
		  $$
		  In other words, *our net requirements derive from what we cannot cover from existing inventory and SRs*.
	  
	* *Lot sizing* - Divide the netted demand into appropriate lot sizes to form jobs. [^MPS_2].

	* *Time phasing* - Offset the due dates of the jobs with lead times to determine start times. In MRP we assume that lead time is not an attribute of the shop floor. 

	* *BOM explosion* - use start times, lot sizes, and the BOM to generate gross requirements at the next level
	* Repeat the above until all levels are processed.

[^MPS_1]:. It is important to accumulate the demand for all parts to exploit economies of scale
[^MPS_2:]: See [[Inventory Management and Control]] for more on the tradeoff and some lot sizing rules  We can use the Wagner-Whitin algorithm for this. 

# Performance
* The frequency with which we perform updates matters for performance reasons
	* If we update too frequently, the shop will have constantly changing planned order releases
	* If we update too infrequently, we will end up with out of date plans. 
* We can use **Firm Planned Orders** to minimize the changes in production schedule, which will cause disruptions to setups. Here we modify the results given by MRP.
* **Pegging** allows the planner to see the source of demand that results in a given planned order release. [^perf_1]

[^perf_1]: We effectively construct a [[Graph Theory|dependency graph]] which would allow us to trace sources of demand for particular products and components. In the event of unexpected events, we can also use this to plan and reprioritize where to allocate parts to meet demand.

* We can also consider optimizing lot-sizing -- balancing setup costs with inventory. 
	* If we do not know the setup cost we can trade off with capacity instead However, capacity as a constraint does not guarantee the Wagner-Whitin property holds. 
	* The following are some approaches to lot-sizing.
		* The **Lot-For-Lot** rule states that the amount to be produced in a period is equal to that period's net requirements. It *minimizes inventory and maximizes total setup cost*
		* **Fixed Order Point** states that we combine the net requirements from $P$ periods. This reduces setup costs. *This has the Wagner-Whitin property* since we produce the exact amount required for each period. 
			* *Production need not occur every $P$ periods*. We skip periods where there is no demand. 
			* The value for $P$ can be determined using the EOQ formula, specifically by using 
			  
			  $$
			  P = \sqrt{\frac{2A}{\hat{D} h}}
			  $$
		* **Fixed Order Quantity** - order a predetermined quantity whenever an order is placed. This makes sense when:
			* Orders can come in predetermined sizes. 
			* We can use [[Inventory Management and Control#Economic Order Quantity Model|EOQ]] with an estimate of average demand.
			* We do not need the Wagner-Whitin property since *this breaks the WW property*. We may increase inventory cost without eliminating setup cost since production need not happen when inventory reaches $0$.
			* We can restore the Wagner-Whitin property by considering only job sizes that are equal to the exact demand of one or more periods.
		* **Part-Period Balancing (PPB)** - a policy that balances the inventory carrying cost and setup cost. 
			* The **Part Period** is the product of the number of parts in a lot times the number of periods they are carried in inventory. 
			* The goal is to get inventory carrying cost as close to setup cost as possible.
	* *The Wagner-Whitin property may not be practical in real settings since any excess can become safety stock*.

* We should account for uncertainty with safety stock and safety lead times
	* There are several sources of uncertainty  
		* The quantity of demand.
		* The timing of demand
		* Production timing.
		* Production quantity (which can happen due to yield loss)
	* *Safety stock protects against uncertainty in production and demand quantities*
		* If we have safety stock in the system, we simply include this in the calculation for the net requirements. *We just remove the amount of safety stock from the current on-hand inventory*
		* The effectiveness of compromising safety for inventory to mitigate yield loss depends on the variability of yield. 
	* *Safety lead time protects against uncertainty in production and demand timing.* 
		* Ofsetting is done in two stages -- first for the safety lead time regarding the planned order receipt date, and the second to obtain the planned order release date.
		* The effect on planned order releases is identical to simply inflating the planned lead times.
		* The due dates on the jobs are earlier in a system using safety lead times than in one without it
		* If we are to try to guarantee any level of service for an assembly, the service for the component parts must be much greater
	* *Both safety stock and safety lead times lie*. Safety stock means producing for no demand and safety lead times mean setting due dates earlier than required. They make available-to-promise calculations difficult and can degrade performance due to exploits or difficulty scheduling. 

* *There are problems within the MRP framework*
	* MRP implicitly assumes all lines have infinite capacity.
	* There are many pressures to increase planned lead times which lead to large inventories. MRP also implicitly assumes lead times are constant. 
	* **System Nervousness** - this occurs when a small [[Perturbation Theory|change]] in the MPS results in a large change in planned order releases. This can be remedied a few ways
		* Use proper lot-sizing rules (not a perfect solution)
		* Use a hierarchical approach -- different lot sizing rules per BOM level. Fixed Order Quantity for end items, Fixed Order Period for lowest level items, and either FOQ or lot-for-lot for anything in between. 
		* Reduce the perturbations themselves at the cost of system flexibility and responsiveness, and more logistical work.
			* Establish a **frozen zone** where *changes in the MPS early on are not permitted since these changes cascade the worst*. 
			* Establish **time fences**, a softer version of frozen zones where we establish time frames that are increasingly softer (less frozen)
			* Use firm planned orders to fix planned order releases. 
	* *MRP does little to fix actual problems because it is built on a heuristic at best and an inaccurate model at worst*
	* The tendency to inflate lead times also means that plants run inefficiently.
	* *ERP systems  are very monolithic*. 
	* MRP requires tailoring the operations system to a firm's business needs.
# Links
* [[Factory Physics by Hopp and Spearman|Hopp and Spearman]] - Ch. 3